import { createHash } from 'crypto'
import { canLevelUp, xpRange } from '../lib/levelling.js'
import fetch from 'node-fetch'
import fs from 'fs'
const { levelling } = '../lib/levelling.js'
import moment from 'moment-timezone'
import { promises } from 'fs'
import { join } from 'path'
const time = moment.tz('Egypt').format('HH')
let wib = moment.tz('Egypt').format('HH:mm:ss')
//import db from '../lib/database.js'

let handler = async (m, {conn, usedPrefix, usedPrefix: _p, __dirname, text, isPrems}) => {
    let d = new Date(new Date + 3600000)
    let locale = 'ar'
    let week = d.toLocaleDateString(locale, { weekday: 'long' })
    let date = d.toLocaleDateString(locale, { day: 'numeric', month: 'long', year: 'numeric' })
    let _uptime = process.uptime() * 1000
    let uptime = clockString(_uptime)
let who = m.quoted ? m.quoted.sender : m.mentionedJid && m.mentionedJid[0] ? m.mentionedJid[0] : m.fromMe ? conn.user.jid : m.sender
if (!(who in global.db.data.users)) throw `âœ³ï¸ The user is not found in my database`
let videoUrl = 'https://telegra.ph/file/2e8338d1327f0dc89e36c.mp4';
  let vn = './media/menu.mp3';
  const user = global.db.data.users[m.sender];
  const {money, joincount} = global.db.data.users[m.sender];
  const {exp, limit, level, role} = 
    global.db.data.users[m.sender];
let { min, xp, max } = xpRange(user.level, global.multiplier)
let username = conn.getName(who)
let math = max - xp
let sn = createHash('md5').update(who).digest('hex')
let totalreg = Object.keys(global.db.data.users).length;
let rtotalreg = Object.values(global.db.data.users).filter(user => user.registered == true).length 
let more = String.fromCharCode(8206)
let readMore = more.repeat(900) 
  const taguser = '@' +  m.sender.split('@s.whatsapp.net')[0];
let str = `
*âŒž*  ${taguser} *â”‹ â˜€ï¸âŒ* _*Ù…Ø±Ø­Ø¨Ø§*_
*ðŸš€âœ¨ Ø§Ù„Ù…Ø³ØªÙˆÙ‰:*${level}
*ðŸ’¡ðŸ’¼ Ø§Ù„Ø®Ø¨Ø±Ø©:*${exp}
*ðŸ“ŠðŸ” Ø±Ø§Ù†Ùƒ:*${role}
*â˜€ï¸ðŸŒŸØ³ØªØ§Ø±Ùƒ Ø¯ÙˆÙ„Ø§Ø±:*${money}
*ðŸ”±ðŸŽŸï¸Ø¨Ø·Ø§Ù‚Ø§Øª:${joincount}*
*â‡ï¸ðŸ‘¨ðŸ»â€ðŸŽ“Ø¨Ø±ÙŠÙ…ÙŠÙˆÙ…:* ${user.premiumTime > 0 ? 'âœ…' : (isPrems ? 'âœ…' : 'âŒ') || ''}

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
*ðŸŒ Ø§ÙˆØ§Ù…Ù€Ø± Ø§Ù„Ø¨Ù€ÙˆØª â†¯Â°*

*âš”ï¸âœ¨ Ø­Ø· Ù‚Ø¨Ù„ ÙƒÙ„ Ø§Ù…Ø± : âŒŠ . âŒ‰*
*âš”ï¸ðŸŒ Ø§Ù„Ù€Ø¨Ù€ÙˆØª Ù„Ù€Ø¬Ù€Ù€Ø±ÙˆØ¨Ù€Ø§Øª Ø¨Ù€Ø³*
*âš”ï¸ðŸš« Ù„Ø§ØªÙ€Ù€Ø³Ù€Ø¨ Ø§Ù„Ù€Ø¨Ù€Ù€Ù€ÙˆØª ðŸ“œ*

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”£ *â€Œâ€Œâ€Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£ÙˆØ§Ù…Ø±* :
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›
â”â”â”â”â”â¦… *ðŒðˆðŠð„ð˜âŠ°ðŸ•¸ï¸âŠ±ððŽð“* â¦†â”â”â”â”â”“
â”ƒ *Ø§ÙˆØ§Ù…Ø± Ø§Ù„ØªØ­Ù…ÙŠÙ„*
â”ƒ ðŸŽµ *.ÙŠÙˆØª* - ØªØ­Ù…ÙŠÙ„ Ù…Ù„ÙØ§Øª Ø§Ù„ØµÙˆØª
â”ƒ ðŸ¦ *.ØªÙˆÙŠØªØ±* - ØªØ­Ù…ÙŠÙ„ Ù…Ù„ÙØ§Øª Ù…Ù† ØªÙˆÙŠØªØ±
â”ƒ ðŸŽ¥ *.ØªÙŠÙƒ* - ØªØ­Ù…ÙŠÙ„ Ù…Ù‚Ø§Ø·Ø¹ TikTok
â”ƒ ðŸ“˜ *.ÙÙŠØ³* - ØªØ­Ù…ÙŠÙ„ Ù…Ù„ÙØ§Øª ÙÙŠØ³Ø¨ÙˆÙƒ
â”ƒ ðŸ“‚ *.Ø¯Ø±Ø§ÙŠÙ* - ØªØ­Ù…ÙŠÙ„ Ù…Ù† Google Drive
â”ƒ ðŸŽ¬ *.Ù…ÙŠØ¯ÙŠØ§* - ØªØ­Ù…ÙŠÙ„ Ù…Ù„ÙØ§Øª Ù…ØªÙ†ÙˆØ¹Ø©
â”ƒ ðŸ“· *.Ø¬ÙŠØ«Ø¨* - ØªØ­Ù…ÙŠÙ„ ØµÙˆØ± Giphy
â”ƒâ”â”â”â”â”â”â”â”â”
â”ƒ *Ø§ÙˆØ§Ù…Ø± Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø©*
â”ƒ âš™ï¸ *.ØªÙØ¹ÙŠÙ„* - ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¨ÙˆØª
â”ƒ â›” *.ØªØ¹Ø·ÙŠÙ„* - ØªØ¹Ø·ÙŠÙ„ Ø§Ù„Ø¨ÙˆØª
â”ƒ ðŸ”— *.Ù…Ù†Ø´Ù†* - Ù…Ù†Ø´Ù† Ø§Ù„Ø£Ø¹Ø¶Ø§Ø¡
â”ƒ ðŸ•µï¸â€â™‚ï¸ *.Ù…Ø®ÙÙŠ* - Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø¨ÙˆØª
â”ƒ ðŸ”„ *.Ø¬Ù„Ø¨/Ø°Ø§ØªÙŠØ©* - Ø¬Ù„Ø¨ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø°Ø§ØªÙŠØ©
â”ƒ ðŸ’‘ *.Ø²ÙˆØ¬Ù†ÙŠ* - Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø´Ø±ÙŠÙƒ
â”ƒ ðŸŒ *.Ø§Ù„Ø±Ø§Ø¨Ø·* - Ø¹Ø±Ø¶ Ø±Ø§Ø¨Ø· Ø§Ù„Ù‚Ø±ÙˆØ¨
â”ƒ ðŸ“¤ *.Ø±ÙØ¹* - Ø±ÙØ¹ Ø¹Ø¶Ùˆ
â”ƒ ðŸ“¥ *.ØªÙ†Ø²ÙŠÙ„* - ØªÙ†Ø²ÙŠÙ„ Ø¹Ø¶Ùˆ
â”ƒ ðŸ“ *.ÙˆØµÙ* - Ø¹Ø±Ø¶ ÙˆØªØ¹Ø¯ÙŠÙ„ ÙˆØµÙ Ø§Ù„Ù‚Ø±ÙˆØ¨
â”ƒ ðŸ“› *.Ø§Ø³Ù…* - Ø¹Ø±Ø¶ ÙˆØªØ¹Ø¯ÙŠÙ„ Ø§Ø³Ù… Ø§Ù„Ù‚Ø±ÙˆØ¨
â”ƒ ðŸ–¼ï¸ *.Ø®Ù„ÙÙŠØ©* - Ø¹Ø±Ø¶ ÙˆØªØ¹Ø¯ÙŠÙ„ ØµÙˆØ±Ø© Ø§Ù„Ø®Ù„ÙÙŠØ©
â”ƒ ðŸš« *.Ø·Ø±Ø¯* - Ø·Ø±Ø¯ Ø¹Ø¶Ùˆ
â”ƒ ðŸ”ƒ *.Ø§Ø³ØªØ¨Ø¯Ø§Ù„* - Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ù†Øµ Ø¨Ø¢Ø®Ø±
â”ƒâ”â”â”â”â”â”â”â”â”
â”ƒ *Ø§ÙˆØ§Ù…Ø± Ø®Ø¯Ù…ÙŠØ©*
â”ƒ ðŸ§¾ *.ÙØ­Øµ* - ÙØ­Øµ Ø±Ø§Ø¨Ø· Ø§Ù„Ù‚Ø±ÙˆØ¨
â”ƒ ðŸ“– *.Ø³ÙˆØ±Ø©* - Ø¹Ø±Ø¶ Ø¢ÙŠØ§Øª Ù…Ù† Ø§Ù„Ù‚Ø±Ø¢Ù†
â”ƒ ðŸ•‹ *.Ø§Ù„Ù„Ù‡* - ØªÙ„Ø§ÙˆØ© Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ù„Ù‡ Ø§Ù„Ø­Ø³Ù†Ù‰
â”ƒ ðŸ“œ *.Ø­Ø¯ÙŠØ«* - Ø¹Ø±Ø¶ Ø­Ø¯ÙŠØ« Ù†Ø¨ÙˆÙŠ
â”ƒ ðŸ¤² *.Ø¯Ø¹Ø§Ø¡* - Ø¹Ø±Ø¶ Ø¯Ø¹Ø§Ø¡
â”ƒ ðŸ› *.Ø¯ÙŠÙ†ÙŠ* - Ø¹Ø±Ø¶ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¯ÙŠÙ†ÙŠØ©
â”ƒ ðŸ•°ï¸ *.Ø§Ù„Ù…Ø¯Ø©* - Ø¹Ø±Ø¶ Ù…Ø¯Ø© Ø§Ù„ØªØ´ØºÙŠÙ„
â”ƒ ðŸš€ *.Ø§Ù„Ø³Ø±Ø¹Ø©* - Ø¹Ø±Ø¶ Ø³Ø±Ø¹Ø© Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª
â”ƒ ðŸŒ *.ØªØ±Ø¬Ù…* - ØªØ±Ø¬Ù…Ø© Ø§Ù„Ù†Øµ
â”ƒ ðŸŽ¨ *.Ø²Ø®Ø±ÙØ©* - Ø²Ø®Ø±ÙØ© Ø§Ù„Ù†Øµ
â”ƒ ðŸ¤µ *.Ø²ÙˆØ¬Ù†ÙŠ* - Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø²ÙˆØ¬
â”ƒ ðŸŒ„ *.Ù„ØµÙˆØ±Ø©* - Ø¹Ø±Ø¶ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØµÙˆØ±Ø©
â”ƒ ðŸŽ™ï¸ *.Ù„ØªØ³Ø¬ÙŠÙ„* - ØªØ³Ø¬ÙŠÙ„ Ø§Ù„ØµÙˆØª
â”ƒ ðŸ¤– *.Ø§Ù„Ù…Ø·ÙˆØ±* - Ø¹Ø±Ø¶ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø·ÙˆØ±
â”ƒ ðŸ–¼ï¸ *.Ù…Ù„ØµÙ‚* - Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù„ØµÙ‚
â”ƒ Â©ï¸ *.Ø­Ù‚ÙˆÙ‚* - Ø¹Ø±Ø¶ Ø­Ù‚ÙˆÙ‚ Ø§Ù„Ø¨ÙˆØª
â”ƒ ðŸ‘¤ *.Ø³Ù…Ø§Ø­* - Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØªÙØ§Ø¹Ù„
â”ƒ â›“ï¸ *.ØªÙ‚ÙŠÙŠØ¯* - ØªÙ‚ÙŠÙŠØ¯ Ø¹Ø¶Ùˆ
â”ƒ ðŸš¶â€â™‚ï¸ *.Ø§Ø±ÙØ¹Ù†ÙŠ* - Ø·Ù„Ø¨ Ø§Ù„Ø§Ø±ØªÙ‚Ø§Ø¡
â”ƒ ðŸšª *.ØºØ§Ø¯Ø±* - Ù…ØºØ§Ø¯Ø±Ø© Ø§Ù„Ù‚Ø±ÙˆØ¨
â”ƒ ðŸ“ *.Ù†Ø¨Ø°ØªÙ‡* - Ø¹Ø±Ø¶ Ù†Ø¨Ø°Ø© Ø¹Ù† Ø¹Ø¶Ùˆ
â”ƒ ðŸ”„ *.Ø­ÙˆÙ„* - Ø¹Ø±Ø¶ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¨ÙˆØª
â”ƒ ðŸ“œ *.Ø§Ø³ÙƒØ±Ø¨Øª* - ØªØ´ØºÙŠÙ„ Ø³ÙƒØ±Ø¨Øª
â”ƒ ðŸŒŸ *.Ø§Ù„Ù…Ù…ÙŠØ²ÙŠÙ†* - Ø¹Ø±Ø¶ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù…ÙŠØ²ÙŠÙ†
â”ƒ ðŸ‘‘ *.Ù…Ù…ÙŠØ²* - ØªØ±Ù‚ÙŠØ© Ø¹Ø¶Ùˆ Ø¥Ù„Ù‰ Ù…Ù…ÙŠØ²
â”ƒ ðŸ‘¤ *.Ø¹Ø¶Ùˆ* - ØªÙ†Ø²ÙŠÙ„ Ø¹Ø¶Ùˆ Ù…Ù† Ø§Ù„Ù…Ù…ÙŠØ²ÙŠÙ†
â”ƒ ðŸ¤– *.Ù„Ù„Ø¨ÙˆØª/Ø­Ø·* - ØªØ¹ÙŠÙŠÙ† ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ø¨ÙˆØª
â”ƒ ðŸŽ­ *.Ø§ÙØªØ§Ø±Ø§Øª* - Ø¹Ø±Ø¶ ØµÙˆØ± Ø§Ù„Ø§ÙØªØ§Ø±
â”ƒ ðŸ‘¦â€ðŸ‘¦ *.Ø§ÙˆÙ„Ø§Ø¯* - Ø¹Ø±Ø¶ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£ÙˆÙ„Ø§Ø¯
â”ƒ ðŸ“¸ *.ØªÙŠÙƒ2* - ØªØ­Ù…ÙŠÙ„ Ù…Ù‚Ø§Ø·Ø¹ TikTok Ø¨Ø¬ÙˆØ¯Ø© Ø¹Ø§Ù„ÙŠØ©
â”ƒ ðŸ“· *.Ø§Ù†Ø³ØªØ§2* - ØªØ­Ù…ÙŠÙ„ ØµÙˆØ± Ù…Ù† Instagram Ø¨Ø¬ÙˆØ¯Ø© Ø¹Ø§Ù„ÙŠØ©
â”ƒ ðŸ”„ *.Ø§Ù„Ù…Ø²ÙŠØ¯* - Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„Ø£ÙˆØ§Ù…Ø±
â”ƒ ðŸ“¢ *.Ø§Ù†Ø·Ù‚* - ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ù†Øµ Ø¥Ù„Ù‰ ØµÙˆØª
â”ƒâ”â”â”â”â”â”â”â”â”
â”ƒ *Ø§ÙˆØ§Ù…Ø± ØªØ±ÙÙŠÙ‡ÙŠØ©*
â”ƒ ðŸ“š *.ÙƒØª* - Ø¹Ø±Ø¶ Ù†ØµÙˆØµ Ø¹Ø´ÙˆØ§Ø¦ÙŠØ©
â”ƒ ðŸ¤” *.Ø®ÙŠØ±ÙˆÙƒ* - Ù„Ø¹Ø¨Ø© Ø®ÙŠØ§Ø±ÙŠÙ†
â”ƒ ðŸ“Š *.Ù„Ùˆ* - Ù„Ø¹Ø¨Ø© "Ù„Ùˆ"
â”ƒ ðŸ“ *.Ø¨Ø§ÙŠÙˆ* - Ø¹Ø±Ø¶ Ù†Ø¨Ø°Ø© Ø¹Ù† Ø§Ù„Ø¹Ø¶Ùˆ
â”ƒ ðŸ§‘â€ðŸŽ¨ *.Ø´Ø®ØµÙŠØ©* - ØªØ­Ù„ÙŠÙ„ Ø´Ø®ØµÙŠØ© Ø¹Ø´ÙˆØ§Ø¦ÙŠØ©
â”ƒ ðŸ’– *.Ø§Ù„Ø­Ø¨* - Ø§Ø­Ø³Ø¨ Ù†Ø³Ø¨Ø© Ø§Ù„Ø­Ø¨
â”ƒ ðŸ§  *.Ø°ÙƒØ§Ø¡* - Ù‚ÙŠØ§Ø³ Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø°ÙƒØ§Ø¡
â”ƒ ðŸ¤ª *.ØºØ¨Ø§Ø¡* - Ù‚ÙŠØ§Ø³ Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØºØ¨Ø§Ø¡
â”ƒ ðŸŒŸ *.Ø§Ù„Ø´Ø®ØµÙŠÙ‡* - Ø§ÙƒØªØ´Ø§Ù Ø§Ù„Ø´Ø®ØµÙŠØ©
â”ƒâ”â”â”â”â”â”â”â”â”
â”ƒ *Ø§ÙˆØ§Ù…Ø± Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨*
â”ƒ ðŸ¤– *.Ø§ÙƒØ³* - Ù„Ø¹Ø¨Ø© X-O
â”ƒ â“ *.Ø³Ø¤Ø§Ù„* - Ø§Ù„Ø¹Ø¨ Ù„Ø¹Ø¨Ø© Ø§Ù„Ø£Ø³Ø¦Ù„Ø©
â”ƒ ðŸŒ *.Ø¹Ù„Ù…* - Ù„Ø¹Ø¨Ø© ØªØ®Ù…ÙŠÙ† Ø§Ù„Ø¹Ù„Ù…
â”ƒ âž• *.Ø¬Ù…Ø¹* - Ù„Ø¹Ø¨Ø© Ø¬Ù…Ø¹ Ø§Ù„Ø£Ø¹Ø¯Ø§Ø¯
â”ƒ ðŸ” *.ÙÙƒÙƒ* - Ù„Ø¹Ø¨Ø© ÙÙƒÙƒ Ø§Ù„ÙƒÙ„Ù…Ø©
â”—â”â”â”â”â¦… *ðŒðˆðŠð„ð˜âŠ°ðŸ•¸ï¸âŠ±ððŽð“* â¦†â”â”â”â”
â”£ à¶¬âƒŸ â™¥ï¸    ð™•ð™Šð™ð™Š
â”£ à¶¬âƒŸ â™¥ sá´á´„Éªá´€ÊŸ : https://www.instagram.com/tweets._.zahir?igsh=cDRqcWQ5cTc1dDJz
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â¦`.trim();

conn.sendMessage(m.chat, {
        video: { url: videoUrl }, caption: str,
  mentions: [m.sender,global.conn.user.jid],
  gifPlayback: true,gifAttribution: 0
    }, { quoted: m });
}; 
handler.help = ['main']
handler.tags = ['group']
handler.command = ['Ø§ÙˆØ§Ù…Ø±'] 

export default handler
function clockString(ms) {
    let h = isNaN(ms) ? '--' : Math.floor(ms / 3600000)
    let m = isNaN(ms) ? '--' : Math.floor(ms / 60000) % 60
    let s = isNaN(ms) ? '--' : Math.floor(ms / 1000) % 60
    return [h, m, s].map(v => v.toString().padStart(2, 0)).join(':')}

    function ucapan() {
      const time = moment.tz('Egypt').format('HH')
      let res = "Ø¨Ø¯Ø§ÙŠØ© ÙŠÙˆÙ… Ø³Ø¹ÙŠØ¯Ù‡ â˜€ï¸"
      if (time >= 4) {
        res = "ØµØ¨Ø§Ø­ Ø§Ù„Ø®ÙŠØ± ðŸŒ„"
      }
      if (time >= 10) {
        res = "Ù…Ø³Ø§Ø¡ Ø§Ù„Ø®ÙŠØ± â˜€ï¸"
      }
      if (time >= 15) {
        res = "Ù…Ø³Ø§Ø¡ Ø§Ù„Ø®ÙŠØ± ðŸŒ‡"
      }
      if (time >= 18) {
        res = "Ù…Ø³Ø§Ø¡ Ø§Ù„Ø®ÙŠØ± ðŸŒ™"
      }
      return res
      }
